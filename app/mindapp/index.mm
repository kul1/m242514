<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1273819432637" ID="ID_1098419600" MODIFIED="1334737006485" TEXT="Mindapp">
<node CREATED="1273819462973" ID="ID_282419531" MODIFIED="1510086083966" POSITION="right" TEXT="services">
<node CREATED="1275756501221" ID="ID_1720745721" MODIFIED="1510328789805" TEXT="users:User">
<node CREATED="1278491598711" ID="ID_1662699954" MODIFIED="1494393920347" TEXT="role:m"/>
<node CREATED="1279700865182" ID="ID_1266797279" MODIFIED="1357798847781" TEXT="link:info: /users"/>
<node CREATED="1319015338880" ID="ID_189841353" MODIFIED="1330477824203" TEXT="link:pending tasks: /mindapp/pending">
<node CREATED="1510338574683" ID="ID_1131655492" MODIFIED="1510338584200" TEXT="role:m"/>
<node CREATED="1282816887988" ID="ID_1944271817" MODIFIED="1282817769412" TEXT="rule:login? &amp;&amp; own_xmain?"/>
</node>
<node CREATED="1275905802131" ID="ID_154000410" MODIFIED="1355422418892" TEXT="user:edit">
<node CREATED="1275756515843" ID="ID_1108188320" MODIFIED="1330477833918" TEXT="enter_user:edit">
<icon BUILTIN="attach"/>
<node CREATED="1282816887988" ID="ID_1767357871" MODIFIED="1282817769412" TEXT="rule:login? &amp;&amp; own_xmain?"/>
</node>
<node CREATED="1275756530989" ID="ID_1221806432" MODIFIED="1282822205361" TEXT="update_user">
<icon BUILTIN="bookmark"/>
</node>
</node>
<node CREATED="1275756504750" ID="ID_1382277695" MODIFIED="1355422424108" TEXT="pwd:change password">
<node CREATED="1275756515843" ID="ID_1559014937" MODIFIED="1330477842311" TEXT="enter: edit">
<icon BUILTIN="attach"/>
<node CREATED="1282816887988" ID="ID_2948144" MODIFIED="1282817769412" TEXT="rule:login? &amp;&amp; own_xmain?"/>
</node>
<node CREATED="1275756530989" ID="ID_1566171053" MODIFIED="1275756553762" TEXT="change_password">
<icon BUILTIN="bookmark"/>
</node>
</node>
</node>
<node CREATED="1275752678377" ID="ID_1348489452" MODIFIED="1510283263434" TEXT="admins:Admin">
<node CREATED="1275752688167" ID="ID_229996461" MODIFIED="1275752690948" TEXT="role:a"/>
<node CREATED="1282722836614" ID="ID_1213363124" MODIFIED="1330477902602" TEXT="edit_role:edit user role">
<node CREATED="1282722862918" ID="ID_1190117882" MODIFIED="1330477922159" TEXT="select_user:select user">
<icon BUILTIN="attach"/>
<node CREATED="1282722901932" ID="ID_1859523490" MODIFIED="1282722903469" TEXT="role:a"/>
</node>
<node CREATED="1282722868801" ID="ID_1325872490" MODIFIED="1330477926538" TEXT="edit_role:edit role">
<icon BUILTIN="attach"/>
<node CREATED="1282722901932" ID="ID_1992100954" MODIFIED="1282722903469" TEXT="role:a"/>
</node>
<node CREATED="1282722907306" ID="ID_1709875397" MODIFIED="1282722922669" TEXT="update_role">
<icon BUILTIN="bookmark"/>
</node>
</node>
<node CREATED="1282789873590" ID="ID_1538855828" MODIFIED="1510283361744" TEXT="edit_pwd:&#xe41;&#xe01;&#xe49;&#xe44;&#xe02;&#xe23;&#xe2b;&#xe31;&#xe2a;&#xe1c;&#xe48;&#xe32;&#xe19;">
<node CREATED="1282722862918" ID="ID_1125188188" MODIFIED="1282722914904" TEXT="select_user:&#xe40;&#xe25;&#xe37;&#xe2d;&#xe01;&#xe1c;&#xe39;&#xe49;&#xe43;&#xe0a;&#xe49;&#xe17;&#xe35;&#xe48;&#xe15;&#xe49;&#xe2d;&#xe07;&#xe01;&#xe32;&#xe23;&#xe41;&#xe01;&#xe49;&#xe44;&#xe02;">
<icon BUILTIN="attach"/>
<node CREATED="1282722901932" ID="ID_1807790285" MODIFIED="1282722903469" TEXT="role:a"/>
</node>
<node CREATED="1282722868801" ID="ID_475745482" MODIFIED="1282789923716" TEXT="edit_pwd:&#xe41;&#xe01;&#xe49;&#xe44;&#xe02;&#xe23;&#xe2b;&#xe31;&#xe2a;&#xe1c;&#xe48;&#xe32;&#xe19;">
<icon BUILTIN="attach"/>
<node CREATED="1282722901932" ID="ID_288149813" MODIFIED="1282722903469" TEXT="role:a"/>
</node>
<node CREATED="1282722907306" ID="ID_829548856" MODIFIED="1282789930263" TEXT="update_pwd">
<icon BUILTIN="bookmark"/>
</node>
<node CREATED="1269473183364" ID="_ID_213051281" MODIFIED="1282793229309" TEXT="email to user">
<icon BUILTIN="Mail"/>
<node CREATED="1270070246864" ID="ID_1302756487" MODIFIED="1282793279449" TEXT="subject:&#xe41;&#xe01;&#xe49;&#xe44;&#xe02;&#xe23;&#xe2b;&#xe31;&#xe2a;&#xe1c;&#xe48;&#xe32;&#xe19;: &lt;%=@xmain.id %&gt;"/>
<node CREATED="1282793810761" ID="ID_1916747324" MODIFIED="1510375024355" TEXT="from: 1.0@kul.asia"/>
<node CREATED="1282793818424" ID="ID_1944352658" MODIFIED="1282793877991" TEXT="to: &lt;%= @xvars[:email] %&gt;"/>
</node>
</node>
<node CREATED="1273913393454" ID="ID_1088166839" MODIFIED="1355422465435" TEXT="link: pending tasks: /mindapp/pending"/>
<node CREATED="1275790679363" ID="ID_829325467" MODIFIED="1355422470135" TEXT="link: logs: /mindapp/logs"/>
<node CREATED="1507573166973" ID="ID_351025910" MODIFIED="1507573781691" TEXT="link: docs: /mindapp/doc"/>
</node>
<node CREATED="1273706796854" FOLDED="true" ID="ID_1003882979" MODIFIED="1509758845470" TEXT="devs: Developer">
<node CREATED="1275373154914" ID="ID_340725299" MODIFIED="1275373158632" TEXT="role:d"/>
<node CREATED="1275788317299" ID="ID_716276608" MODIFIED="1359019912446" TEXT="link: error_logs: /mindapp/error_logs"/>
</node>
<node CREATED="1489875563330" FOLDED="true" ID="ID_1495015891" MODIFIED="1510283520700" TEXT="ctrs: ctrs&amp; Menu">
<node CREATED="1489875583646" ID="ID_1796125628" MODIFIED="1494393464288" TEXT="role:a"/>
<node CREATED="1275905802131" ID="ID_1960607342" MODIFIED="1489938927874" TEXT="vfolder1:Sub Menu 1">
<node CREATED="1275756515843" ID="ID_328242903" MODIFIED="1489939229748" TEXT="viewfile1: Title 1">
<icon BUILTIN="attach"/>
<node CREATED="1282816887988" ID="ID_1479413309" MODIFIED="1282817769412" TEXT="rule:login? &amp;&amp; own_xmain?"/>
</node>
<node CREATED="1275756515843" ID="ID_1316819449" MODIFIED="1490683859703" TEXT="viewfile2: Title 2">
<icon BUILTIN="attach"/>
<node CREATED="1282816887988" ID="ID_1510989172" MODIFIED="1282817769412" TEXT="rule:login? &amp;&amp; own_xmain?"/>
</node>
<node CREATED="1275756530989" ID="ID_171099141" MODIFIED="1489939276491" TEXT="update_viewfile1">
<icon BUILTIN="bookmark"/>
</node>
</node>
<node CREATED="1275756504750" ID="ID_914236141" MODIFIED="1489939000929" TEXT="vfolder2:Title 2">
<node CREATED="1275756515843" ID="ID_1222970183" MODIFIED="1489939293714" TEXT="viewfile2: Title 2">
<icon BUILTIN="attach"/>
<node CREATED="1282816887988" ID="ID_1312913420" MODIFIED="1282817769412" TEXT="rule:login? &amp;&amp; own_xmain?"/>
</node>
</node>
</node>
<node CREATED="1493393619430" ID="ID_328863650" MODIFIED="1510338630958" TEXT="articles: Article">
<node CREATED="1493419096527" ID="ID_1521905276" MODIFIED="1493478060121" TEXT="link: All Articles: /articles"/>
<node CREATED="1493489768542" ID="ID_1376361427" MODIFIED="1493768994418" TEXT="link: My article: /articles/my">
<node CREATED="1493490295677" ID="ID_628476988" MODIFIED="1493490302239" TEXT="role:m"/>
</node>
<node CREATED="1493419257021" ID="ID_1355420049" MODIFIED="1493489729876" TEXT="new_article: New Article">
<node CREATED="1493419299004" ID="ID_1468250197" MODIFIED="1493419428686" TEXT="form_article: New Article">
<icon BUILTIN="attach"/>
<node CREATED="1493479075294" ID="ID_1145618514" MODIFIED="1493479079687" TEXT="role:m"/>
</node>
<node CREATED="1493419491125" ID="ID_1687683396" MODIFIED="1493483244848" TEXT="create: Create Article">
<icon BUILTIN="bookmark"/>
</node>
</node>
<node CREATED="1493419562726" ID="ID_922854639" MODIFIED="1493490306480" TEXT="edit_article: Edit Article">
<node CREATED="1493419577933" ID="ID_938626803" MODIFIED="1509916624858" TEXT="select_article: Select Article">
<icon BUILTIN="attach"/>
<node CREATED="1493479602815" ID="ID_753056881" MODIFIED="1493479606921" TEXT="role:m"/>
</node>
<node CREATED="1493419612720" ID="ID_661682947" MODIFIED="1493524438941" TEXT="edit_article: Edit Article">
<icon BUILTIN="attach"/>
<node CREATED="1493479557266" ID="ID_1681993437" MODIFIED="1493479561055" TEXT="role:m"/>
</node>
<node CREATED="1493419735921" ID="ID_1575963748" MODIFIED="1493489477505" TEXT="update: Update Article">
<icon BUILTIN="bookmark"/>
</node>
</node>
<node CREATED="1495246388313" ID="ID_1861034169" MODIFIED="1495262793752" TEXT="xedit_article: xEdit Article">
<node CREATED="1495246432533" ID="ID_91386173" MODIFIED="1495267233398" TEXT="edit_article: Edit Article">
<icon BUILTIN="attach"/>
<node CREATED="1495246517185" ID="ID_1224073606" MODIFIED="1495246522964" TEXT="role:m"/>
</node>
<node CREATED="1495246466176" ID="ID_1635586443" MODIFIED="1495266959360" TEXT="update: Update Article">
<icon BUILTIN="bookmark"/>
</node>
</node>
<node CREATED="1493419257021" ID="ID_1193600607" MODIFIED="1509830245004" TEXT="search_article: Search Article">
<node CREATED="1493419299004" ID="ID_772767589" MODIFIED="1509840501756" TEXT="search_article: New Search">
<icon BUILTIN="xmag"/>
<node CREATED="1493479075294" ID="ID_1120474169" MODIFIED="1493479079687" TEXT="role:m"/>
</node>
<node CREATED="1493419491125" ID="ID_591815489" MODIFIED="1510086255984" TEXT="search_result: Result">
<icon BUILTIN="list"/>
</node>
</node>
<node CREATED="1493419257021" ID="ID_1926983877" MODIFIED="1509933712505" TEXT="report_article: Report Article">
<node CREATED="1493419299004" ID="ID_425113095" MODIFIED="1509933767471" TEXT="report_article: Report Article">
<icon BUILTIN="list"/>
<node CREATED="1493479075294" ID="ID_649897470" MODIFIED="1493479079687" TEXT="role:m"/>
</node>
</node>
</node>
<node CREATED="1493664700564" FOLDED="true" ID="ID_704959130" MODIFIED="1507383970984" TEXT="comments: Comment">
<node CREATED="1493665155709" ID="ID_1973520751" MODIFIED="1493665186791" TEXT="new_comment: New Comment">
<node CREATED="1493665192413" ID="ID_345629058" MODIFIED="1493665226422" TEXT="create">
<icon BUILTIN="bookmark"/>
<node CREATED="1493665231940" ID="ID_1645532530" MODIFIED="1493665237018" TEXT="role:m"/>
</node>
</node>
<node CREATED="1494393494180" ID="ID_1101205873" MODIFIED="1495275996686" TEXT="role:m"/>
</node>
<node CREATED="1494172726642" ID="ID_925257043" MODIFIED="1494172755433" TEXT="sitemap: Sitemap">
<node CREATED="1494172758253" ID="ID_961056168" MODIFIED="1494172797972" TEXT="sitemap: Sitemap"/>
<node CREATED="1494393494180" ID="ID_242460166" MODIFIED="1494393504971" TEXT="role:a"/>
</node>
<node CREATED="1509140340995" FOLDED="true" ID="ID_939751135" MODIFIED="1509809936104" TEXT="docs: Document">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1509140374852" ID="ID_546151272" MODIFIED="1509307808304" TEXT="link: All Document: /docs"/>
<node CREATED="1493489768542" ID="ID_464451434" MODIFIED="1509307778940" TEXT="link: My Document: /docs/my">
<node CREATED="1493490295677" ID="ID_1381659521" MODIFIED="1493490302239" TEXT="role:m"/>
</node>
<node CREATED="1493419257021" ID="ID_1613791359" MODIFIED="1509140470064" TEXT="new_doc: New Doc">
<node CREATED="1493419299004" ID="ID_414964783" MODIFIED="1509140487712" TEXT="form_doc: New Doc">
<icon BUILTIN="attach"/>
<node CREATED="1493479075294" ID="ID_1333443954" MODIFIED="1493479079687" TEXT="role:m"/>
</node>
<node CREATED="1509651235686" ID="ID_943382238" MODIFIED="1509671530542" TEXT="output: Output">
<icon BUILTIN="list"/>
</node>
</node>
</node>
</node>
<node CREATED="1273819465949" FOLDED="true" ID="ID_855471610" MODIFIED="1493768913078" POSITION="right" TEXT="roles">
<node CREATED="1273819847470" ID="ID_1681080231" MODIFIED="1330477307826" TEXT="m: member"/>
<node CREATED="1273819855875" ID="ID_1429503284" MODIFIED="1330477311102" TEXT="a: admin"/>
<node CREATED="1273819859775" ID="ID_568365839" MODIFIED="1330477315009" TEXT="d: developer"/>
</node>
<node CREATED="1273819456867" ID="ID_1677010054" MODIFIED="1510284189043" POSITION="left" TEXT="models">
<node CREATED="1292122118499" FOLDED="true" ID="ID_1957754752" MODIFIED="1493705885123" TEXT="person">
<node CREATED="1292122135809" ID="ID_1617970069" MODIFIED="1332878659106" TEXT="fname"/>
<node CREATED="1292122150362" ID="ID_1200135538" MODIFIED="1332878662388" TEXT="lname"/>
<node CREATED="1332876694150" ID="ID_1770958985" MODIFIED="1332876730552" TEXT="sex: integer">
<node CREATED="1332878665790" ID="ID_793089342" MODIFIED="1332878668499" TEXT="1: male"/>
<node CREATED="1332878669085" ID="ID_1796007763" MODIFIED="1332878673144" TEXT="2: female"/>
</node>
<node CREATED="1292123322429" ID="ID_1509464300" MODIFIED="1332878620176" TEXT="belongs_to :address">
<icon BUILTIN="edit"/>
</node>
<node CREATED="1292122156430" ID="ID_604231613" MODIFIED="1292122161324" TEXT="dob: date"/>
<node CREATED="1286576968143" ID="ID_936807610" MODIFIED="1332878681362" TEXT="phone"/>
<node CREATED="1290823140269" ID="ID_1957301629" MODIFIED="1332878684453" TEXT="photo"/>
</node>
<node CREATED="1292122236285" FOLDED="true" ID="ID_959987887" MODIFIED="1493768919147" TEXT="address">
<node CREATED="1292122254622" ID="ID_430517150" MODIFIED="1355422372241" TEXT="address_street"/>
<node CREATED="1355422373525" ID="ID_1797865138" MODIFIED="1355422378352" TEXT="city"/>
<node CREATED="1355422378959" ID="ID_1964490487" MODIFIED="1355422380765" TEXT="state"/>
<node CREATED="1355422381231" ID="ID_1226075540" MODIFIED="1355422382748" TEXT="zip"/>
<node CREATED="1332876680122" ID="ID_65427990" MODIFIED="1332876682148" TEXT="phone"/>
<node CREATED="1292243471343" ID="ID_1859608350" MODIFIED="1310195256623" TEXT="lat: float"/>
<node CREATED="1292243477436" ID="ID_48497260" MODIFIED="1310195262534" TEXT="lng: float"/>
</node>
<node CREATED="1493418879485" ID="ID_1995497233" MODIFIED="1493718770637" TEXT="article">
<node CREATED="1493418891110" ID="ID_364756011" MODIFIED="1493418905253" TEXT="title"/>
<node CREATED="1493418906868" ID="ID_1676483995" MODIFIED="1493418911919" TEXT="text"/>
<node CREATED="1493487131376" ID="ID_1334057464" MODIFIED="1493487186856" TEXT="belongs_to :user">
<icon BUILTIN="edit"/>
</node>
<node CREATED="1493705838166" ID="ID_408271104" MODIFIED="1493705877062" TEXT="has_many :comments">
<icon BUILTIN="edit"/>
</node>
<node CREATED="1493718773517" ID="ID_944554146" MODIFIED="1493718808965" TEXT="validates :title, :text, :user_id, presence: true">
<icon BUILTIN="edit"/>
</node>
<node CREATED="1494181636998" ID="ID_229502630" MODIFIED="1494181660419" TEXT="body"/>
<node CREATED="1497913676275" ID="ID_404103076" MODIFIED="1497913685065" TEXT="keywords"/>
</node>
<node CREATED="1493418915637" ID="ID_429078131" MODIFIED="1493418930081" TEXT="comment">
<node CREATED="1493418939760" ID="ID_1251093062" MODIFIED="1493418943423" TEXT="body"/>
<node CREATED="1493418945686" ID="ID_911071644" MODIFIED="1493418986711" TEXT="belongs_to :article">
<icon BUILTIN="edit"/>
</node>
<node CREATED="1493643129947" ID="ID_588013696" MODIFIED="1493643146424" TEXT="belongs_to :user">
<icon BUILTIN="edit"/>
</node>
<node CREATED="1493718512191" ID="ID_173203253" MODIFIED="1493718583874" TEXT="validates :body, :user_id, :article_id, presence: true">
<icon BUILTIN="edit"/>
</node>
</node>
<node CREATED="1494040082403" ID="ID_864577403" MODIFIED="1494040090700" TEXT="picture">
<node CREATED="1494040091583" ID="ID_679208099" MODIFIED="1494040119098" TEXT="picture"/>
<node CREATED="1494040120208" ID="ID_1266154874" MODIFIED="1494040125130" TEXT="description"/>
<node CREATED="1493487131376" ID="ID_1422817360" MODIFIED="1493487186856" TEXT="belongs_to :user">
<icon BUILTIN="edit"/>
</node>
</node>
</node>
<node CREATED="1509830328155" ID="ID_1518894233" MODIFIED="1509830335515" POSITION="left" TEXT="no-use">
<node CREATED="1509747384395" ID="ID_279371633" MODIFIED="1509747405015" TEXT="search_article: Search Article">
<node CREATED="1509747405016" ID="ID_1855435773" MODIFIED="1509829801176" TEXT="search_article: Search Article">
<icon BUILTIN="attach"/>
<node CREATED="1509747440821" ID="ID_1984120739" MODIFIED="1509747444134" TEXT="role:m"/>
</node>
<node CREATED="1493419491125" ID="ID_1414902718" MODIFIED="1493483244848" TEXT="create: Create Article">
<icon BUILTIN="bookmark"/>
</node>
</node>
</node>
<node CREATED="1510026434229" FOLDED="true" ID="ID_410949743" MODIFIED="1510086082042" POSITION="right" TEXT="def init">
<node CREATED="1510026458204" FOLDED="true" ID="ID_1001674555" MODIFIED="1510028638146" TEXT="module_code">
<node CREATED="1510026511520" ID="ID_1148285376" MODIFIED="1510027639753" TEXT="xmain = create_xmain(@service)"/>
<node CREATED="1510026608518" ID="ID_476975063" MODIFIED="1510027668302" TEXT="create_runseq(xmain)"/>
<node CREATED="1510026694840" ID="ID_742265702" MODIFIED="1510027810785" TEXT="xmain.update_attribute(:xvars,@xvars)"/>
<node CREATED="1510027823214" ID="ID_1524526979" MODIFIED="1510027857495" TEXT="xmain.runseqs.last.update_attribute(:end, true)"/>
</node>
<node CREATED="1510028587383" ID="ID_680225832" MODIFIED="1510028589787" TEXT="run">
<node CREATED="1510028467096" ID="ID_1572415031" MODIFIED="1510028639614" TEXT="output">
<node CREATED="1510026802552" FOLDED="true" ID="ID_1033525915" MODIFIED="1510030124222" TEXT="run_output">
<node CREATED="1510028367091" ID="ID_580442115" MODIFIED="1510028705464" TEXT="init_vars(params[:xmain_id]"/>
<node CREATED="1510028247653" ID="ID_601355173" MODIFIED="1510028273725" TEXT="@ui = File.read(f)"/>
<node CREATED="1510028282611" ID="ID_938928013" MODIFIED="1510028309483" TEXT="@message"/>
<node CREATED="1510028318482" ID="ID_936813905" MODIFIED="1510028348258" TEXT="! ma_diaplay =&gt; end_action"/>
<node CREATED="1510028396184" ID="ID_876112931" MODIFIED="1510028433298" TEXT="eval &quot;@xvars[@runseq.code] = {} unless @xvars[@runseq.code]&quot; "/>
</node>
<node CREATED="1510028478024" ID="ID_1274095514" MODIFIED="1510030294948" TEXT="end_output">
<node CREATED="1510028517414" ID="ID_964461768" MODIFIED="1510028543396" TEXT="init_vars(params[:xmain_id])    "/>
<node CREATED="1510028527845" MODIFIED="1510028527845" TEXT="end_action"/>
</node>
</node>
<node CREATED="1510028598212" FOLDED="true" ID="ID_1862609935" MODIFIED="1510030129321" TEXT="form">
<node CREATED="1510026802552" ID="ID_867430281" MODIFIED="1510028720015" TEXT="run_form">
<node CREATED="1510028367091" ID="ID_895170827" MODIFIED="1510028731600" TEXT="init_vars(params[:xmain_id]"/>
<node CREATED="1510028788716" ID="ID_534503503" MODIFIED="1510028807171" TEXT="service=xmain.service"/>
<node CREATED="1510028247653" ID="ID_501231646" MODIFIED="1510028273725" TEXT="@ui = File.read(f)"/>
<node CREATED="1510028282611" ID="ID_1256868353" MODIFIED="1510028309483" TEXT="@message"/>
<node CREATED="1510028318482" ID="ID_1874376138" MODIFIED="1510028348258" TEXT="! ma_diaplay =&gt; end_action"/>
</node>
<node CREATED="1510028478024" ID="ID_110422433" MODIFIED="1510029059572" TEXT="end_form">
<node CREATED="1510028517414" ID="ID_1599673916" MODIFIED="1510028543396" TEXT="init_vars(params[:xmain_id])    "/>
<node CREATED="1510028527845" ID="ID_666799044" MODIFIED="1510029097644" TEXT="eval &quot;@xvars[@runseq.code] = {} unless @xvars[@runseq.code]&quot; "/>
<node CREATED="1510029114186" ID="ID_1795559443" MODIFIED="1510029169563" TEXT="      if params[k].respond_to? :original_filename ">
<node CREATED="1510029178705" ID="ID_488552641" MODIFIED="1510029196113" TEXT="get_image"/>
</node>
<node CREATED="1510029224078" ID="ID_1209658622" MODIFIED="1510029230142" TEXT="end_action"/>
</node>
</node>
</node>
<node CREATED="1510029245655" ID="ID_456253227" MODIFIED="1510029286855" TEXT="end_action(nex_runseq = nil">
<node CREATED="1510029294594" ID="ID_548209004" MODIFIED="1510029380028" TEXT="    @xmain.xvars= @xvars&#xa;    @xmain.status= &apos;R&apos; # running&#xa;    @xmain.save!&#xa;    @runseq.status=&apos;F&apos;&#xa;    @runseq.user= current_ma_user&#xa;    @runseq.stop= Time.now&#xa;    @runseq.save"/>
<node CREATED="1510029389595" ID="ID_591459721" MODIFIED="1510029423021" TEXT="    next_runseq= @xmain.runseqs.where(:rstep=&gt; @runseq.rstep+1).first unless next_runseq "/>
<node CREATED="1510029506187" ID="ID_1783974641" MODIFIED="1510029516333" TEXT="    @xmain.update_attribute :current_runseq, next_runseq.id "/>
</node>
</node>
</node>
</map>
